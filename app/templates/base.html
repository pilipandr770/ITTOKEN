<!-- app/templates/base.html -->
<!doctype html>
<html lang="uk">
  <head>
    <meta charset="utf-8">
    <title>{% block title %}–°–∞–π—Ç –±—ñ–∑–Ω–µ—Å—É{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/ocean_bg.css') }}">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% block head %}{% endblock %}
  </head>
  <body>
    {% include '_ocean_bg_video.html' %}
    <header>
      <nav>
        <a href="{{ url_for('main.index') }}">–ì–æ–ª–æ–≤–Ω–∞</a>
        <!-- –°–æ—Ü–º–µ—Ä–µ–∂—ñ -->
        <a href="{{ settings.facebook if settings and settings.facebook else 'https://facebook.com' }}" target="_blank" title="Facebook"><img src="{{ url_for('static', filename='img/facebook.svg') }}" alt="Facebook" style="height:24px;vertical-align:middle;"></a>
        <a href="{{ settings.instagram if settings and settings.instagram else 'https://instagram.com' }}" target="_blank" title="Instagram"><img src="{{ url_for('static', filename='img/instagram.svg') }}" alt="Instagram" style="height:24px;vertical-align:middle;"></a>
        <a href="{{ settings.telegram if settings and settings.telegram else 'https://t.me/' }}" target="_blank" title="Telegram"><img src="{{ url_for('static', filename='img/telegram.svg') }}" alt="Telegram" style="height:24px;vertical-align:middle;"></a>
        <a href="mailto:{{ settings.email if settings and settings.email else 'info@example.com' }}" title="Email"><img src="{{ url_for('static', filename='img/email.svg') }}" alt="Email" style="height:24px;vertical-align:middle;"></a>
        <!-- –ü–µ—Ä–µ–º–∏–∫–∞—á –º–æ–≤ -->
        <form id="lang-switcher-form" method="get" style="display:inline;margin-left:2em;">
          <select name="lang" id="lang-switcher" style="padding:4px 10px;border-radius:6px;border:1px solid #ddd;font-size:1em;">
            <option value="uk" {% if g.get('lang', 'uk') == 'uk' %}selected{% endif %}>UA</option>
            <option value="en" {% if g.get('lang') == 'en' %}selected{% endif %}>EN</option>
            <option value="de" {% if g.get('lang') == 'de' %}selected{% endif %}>DE</option>
            <option value="ru" {% if g.get('lang') == 'ru' %}selected{% endif %}>RU</option>
          </select>
        </form>
        <script>
          document.addEventListener('DOMContentLoaded', function() {
            var langSel = document.getElementById('lang-switcher');
            langSel.addEventListener('change', function() {
              document.getElementById('lang-switcher-form').submit();
            });
          });
        </script>
      </nav>
    </header>

    <main>
      {% block content %}{% endblock %}
    </main>

    <footer id="site-footer" style="position:fixed;left:0;right:0;bottom:0;width:100%;background:#f5f5f5;padding:1em;text-align:center;z-index:900;box-shadow:0 -2px 8px #eee;">
      <a href="/privacy">–ü–æ–ª—ñ—Ç–∏–∫–∞ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω–æ—Å—Ç—ñ</a> |
      <a href="/impressum">–Ü–º–ø—Ä–µ—Å—É–º</a> |
      <a href="/contacts">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
    </footer>
    <!-- –í—ñ–¥–∂–µ—Ç —á–∞—Ç—É OpenAI Assist -->
    <div id="chat-open-btn" style="position:fixed;bottom:30px;right:30px;z-index:1000;cursor:pointer;">
      <img src="/static/img/chat_icon.svg" width="56" height="56"/>
    </div>
    <div id="chat-window" style="display:none;position:fixed;bottom:90px;right:30px;width:340px;height:420px;background:#fff;border-radius:16px;box-shadow:0 2px 24px #0003;z-index:1001;padding:16px;transition:width 0.3s,height 0.3s;">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
        <span style="font-weight:bold;font-size:1.1em;">AI-—á–∞—Ç</span>
        <div>
          <button id="chat-minimize" title="–ó–≥–æ—Ä–Ω—É—Ç–∏" style="background:none;border:none;font-size:1.3em;cursor:pointer;">üóï</button>
          <button id="chat-expand" title="–†–æ–∑–≥–æ—Ä–Ω—É—Ç–∏" style="background:none;border:none;font-size:1.3em;cursor:pointer;">üóñ</button>
        </div>
      </div>
      <div id="chat-messages" style="height:320px;overflow-y:auto;background:#f9f9ff;border-radius:8px;padding:8px;margin-bottom:8px;"></div>
      <input id="chat-input" style="width:75%;padding:8px;border-radius:8px;border:1px solid #ddd;" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å..." autocomplete="off"/>
      <button id="chat-send" style="padding:8px 14px;border-radius:8px;background:#097fff;color:#fff;border:none;cursor:pointer;">‚ñ∂Ô∏è</button>
    </div>
    <script src="{{ url_for('static', filename='assist.js') }}"></script>
    {% block scripts %}{% endblock %}
  </body>
</html>
