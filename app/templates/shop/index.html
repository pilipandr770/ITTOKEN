{% extends 'base.html' %}
{% block title %}{{ _('Магазин') }}{% endblock %}

{% block content %}
<div class="container">
  <h1 class="mt-4 mb-3">{{ _('IT-услуги и продукты') }}</h1>
  
  <!-- Категории товаров/услуг -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="categories-wrapper">
        {% for category in categories %}
          <a href="{{ url_for('shop.category', slug=category.slug) }}" class="category-item">
            <div class="category-card">
              {% if category.image %}
                <img src="{{ url_for('static', filename='uploads/' ~ category.image) }}" alt="{{ get_category_name(category) }}">
              {% endif %}
              <h3>{{ get_category_name(category) }}</h3>
            </div>
          </a>
        {% endfor %}
      </div>
    </div>
  </div>
  
  <!-- Популярные товары/услуги -->
  <h2 class="mt-5 mb-4">{{ _('Популярные предложения') }}</h2>
  <div class="row">
    {% for product in products %}
      <div class="col-md-4 mb-4">
        <div class="product-card">
          <a href="{{ url_for('shop.product', slug=product.slug) }}">
            {% if product.image %}
              <img src="{{ url_for('static', filename='uploads/' ~ product.image) }}" alt="{{ get_product_name(product) }}">
            {% endif %}
            <h3>{{ get_product_name(product) }}</h3>
            <p class="product-price">
              ${{ product.price }}
              {% if product.token_price %}
                <span class="token-price">{{ product.token_price }} {{ token.symbol }}</span>
              {% endif %}
            </p>
          </a>
          <div class="product-actions">
            <form action="{{ url_for('shop.add_to_cart') }}" method="POST">
              <input type="hidden" name="product_id" value="{{ product.id }}">
              <input type="hidden" name="quantity" value="1">
              <button type="submit" class="btn btn-sm btn-primary">{{ _('В корзину') }}</button>
            </form>
            <a href="{{ url_for('shop.product', slug=product.slug) }}" class="btn btn-sm btn-outline-secondary">{{ _('Подробнее') }}</a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
  
  <!-- Информация о токенах -->
  <div class="card mt-5 mb-4">
    <div class="card-body">
      <div class="row">
        <div class="col-md-8">
          <h4>{{ _('Оплачивайте наши услуги токенами и получайте скидки!') }}</h4>
          <p>{{ _('Используйте токены нашей экосистемы для оплаты услуг и товаров с дополнительными преимуществами:') }}</p>
          <ul>
            <li>{{ _('Скидки до 20% при оплате токенами') }}</li>
            <li>{{ _('Дополнительный кешбэк в токенах') }}</li>
            <li>{{ _('Эксклюзивные предложения для держателей токенов') }}</li>
          </ul>
        </div>
        <div class="col-md-4 d-flex align-items-center justify-content-center">
          <a href="{{ url_for('blockchain.token_info') }}" class="btn btn-lg btn-success">{{ _('Узнать о токенах') }}</a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
